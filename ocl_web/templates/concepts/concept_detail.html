{% extends "base.html" %}
{% load bootstrap3 %}
{% load i18n %}
{% load ocl_tags %}

{% block title %}{{ concept.id }}{% endblock title %}

{% block content-no-container %}


<header class="org-header">
	<div class="container">
		<div class="row">
			<div class="col-md-8">

				<div style="width:48px;height:48px;margin-left:0px;margin-top:10px;float:left;font-size:32pt;color:#e5e5e5;"><span class="glyphicon glyphicon-tag"></span></div>
				<div style="display:inline-block;padding-left:20px">

					<h3>
						{% source_owner_label source %} / {% source_label source %} / {% concept_label concept %}

						{% if source.owner_type == 'Organization' %}
						<a href="{% url 'concept-edit' org=source.owner source=source.id concept=concept.id %}" class="small text-muted"><span class="glyphicon glyphicon-cog"></span></a>
						{% else %}
						<a href="{% url 'concept-edit' user=source.owner source=source.id concept=concept.id %}" class="small text-muted"><span class="glyphicon glyphicon-cog"></span></a>
						{% endif %}


					</h3>


					<p>
						{{ concept.display_name }} {% if concept.display_locale %}<span class="small"><em>[{{ concept.display_locale }}]</em></span>{% endif %}&nbsp;&nbsp;<span id="element-info" data-toggle="tooltip" data-placement="right" title="Preferred name in selected language"><span class="glyphicon glyphicon-info-sign"></span></span><br />
						<em>Class:</em> {{ concept.concept_class }},
						<em>Datatype:</em> {{ concept.datatype }}

						<span class="glyphicon glyphicon-calendar"></span> Created on {{ concept.created_on|smart_date }}, last updated {{ concept.updated_on|smart_date}}


					</p>


				</div>

{% if request.GET.debug %}<pre>{{ concept|pprint }}</pre>{% endif %}

			</div> <!-- /col-md-8 -->
		</div> <!-- /row -->
	</div> <!-- /container -->
</header>


<div  ng-app="ConceptApp">

<div class="row"> {# display #}

<div class="row">
	<div class="col-md-3" style="text-align:right;">
		<span style="font-weight:bold;color:#999;">Preferred Name</span>
		<span id="preferred-name-info" data-toggle="tooltip" data-placement="right" title="Primary name in user's preferred language."><span class="glyphicon glyphicon-info-sign"></span></span>
	</div>
	<div class="col-md-9">
		{{ concept.display_name }} <span class="small"><em>[{{ concept.display_locale }}]</em></span>
	</div>
</div>
<div class="row">
	<div class="col-md-3" style="text-align:right;font-weight:bold;color:#999;">
		Class
	</div>
	<div class="col-md-9">
		{{ concept.concept_class }}
	</div>
</div>
<div class="row">
	<div class="col-md-3" style="text-align:right;font-weight:bold;color:#999;">
		Datatype
	</div>
	<div class="col-md-9">
		{{ concept.datatype }}
	</div>
</div>

</div> {# display row #}

<div class="row"><hr /></div>

<div ng-controller="ConceptNameController" >

<div class="row">
	<div class="col-md-3" style="text-align:right;font-weight:bold;color:#999;">
		Synonyms
	</div>

	<div class="col-md-8">

		<ul class="list-group">
			{% verbatim %}
			<li ng-repeat="name in item_list" class="list-group-item">
                <button type="button" class="btn btn-link" ng-click="setEditedItem(name);startEditingItem();" ><span class="glyphicon glyphicon-pencil"></span>
                    </button>

				{{ name.name }} : {{ name.name_type}}<span class="small"><em>[{{ name.locale }}]</em></span>
				<span ng-if="name.locale_preferred" class="glyphicon glyphicon-flag"></span>

				<span class="glyphicon glyphicon-trash pull-right" ng-click="deleteItem(name)"></span>
			{% endverbatim %}				
				{% if request.GET.debug %}<br /><pre>{{ name|pprint }}</pre>{% endif %}</li>
		</ul>
    </div> {# list col8 #}
</div> {# list row #}

<div class="row"> {# add name form row #}
    <div class="col-md-3">
    	&nbsp;
    </div>

    <div class="col-md-6">

    {# add form for names #}
    <div ng-if="shouldShowCreatingItem()">

	<button type="button" class="btn btn-link" ng-click="startCreatingItem()">
        <span class="glyphicon glyphicon-plus"></span>
        {% trans 'Add Name' %}
    </button>

    <form ng-submit="addItem(newItem)" ng-show="isCreatingItem">

    <div class="form-group required">
    	<label class="control-label" for="id_name">Name</label>
    	<input class="form-control" id="id_name" maxlength="30" name="name" 
    	    placeholder="Name" required="required" title="" type="text"
    	    ng-model="newItem.name" />
	</div>
	<div class="form-group">
		<label class="control-label" for="id_name_type">Name Type</label>
		<input class="form-control" id="id_name_type" maxlength="30" name="name_type" 
		    placeholder="Name Type" required="required" title="" type="text"
		    ng-model="newItem.name_type" />
	</div>

	<div class="form-group required">
		<label class="control-label" for="id_locale">Locale</label>
		<input class="form-control" id="id_locale" maxlength="30" name="locale" 
		    placeholder="Locale" required="required" title="" type="text"
		    ng-model="newItem.locale" />
	</div>

	<div class="form-group required">
		  <div class="checkbox">
        <label>
          <input type="checkbox" name="locale_preferred" ng-model="newItem.locale_preferred">{% trans 'Locale Preferred' %}
        </label>
      </div>
	</div>

	<div class="form-group">
	  <button type="submit" class="btn btn-primary">
	    {% trans 'Add Name' %}
	  </button>
      <button type="button" class="btn btn-default pull-right" ng-click="cancelCreatingItem()">{% trans 'Cancel' %}</button>
	 </div>
	</form>
    </div> {# if creating show #}

<div ng-if="shouldShowEditingItem()">

     {% verbatim %}<h4>Editing Name</h4> {% endverbatim %}
    <form ng-submit="updateItem(editedItem)" ng-show="isEditingItem">
    <div class="form-group required">
    	<label class="control-label" for="id_name">Name</label>
    	<input class="form-control" id="id_name" maxlength="30" name="name" 
    	    placeholder="Name" required="required" title="" type="text"
    	    ng-model="editedItem.name" />
	</div>
	<div class="form-group">
		<label class="control-label" for="id_name_type">Name Type</label>
		<input class="form-control" id="id_name_type" maxlength="30" name="name_type" 
		    placeholder="Name type" required="required" title="" type="text"
		    ng-model="editedItem.name_type" />
	</div>

	<div class="form-group required">
		<label class="control-label" for="id_locale">Locale</label>
		<input class="form-control" id="id_locale" maxlength="30" name="locale" 
		    placeholder="Locale" required="required" title="" type="text"
		    ng-model="editedItem.locale" />
	</div>

	<div class="form-group required">
		  <div class="checkbox">
        <label>
          <input type="checkbox" name="locale_preferred" ng-model="editedItem.locale_preferred">{% trans 'Locale Preferred' %}
        </label>
      </div>
	</div>

	<div class="form-group">
	  <button type="submit" class="btn btn-primary">
	    {% trans 'Update Name' %}
	  </button>
      <button type="button" class="btn btn-default pull-right" ng-click="cancelEditingItem()">{% trans 'Cancel' %}</button>
	 </div>
	</form>
</div> {# editing name #}






    </div> {# form col6 #}

</div> {# add form row for name #}
</div> {# names controller #}


<div ng-controller="ConceptDescriptionController" >

<div class="row"><hr /></div>


<div class="row" >
	<div class="col-md-3" style="text-align:right;font-weight:bold;color:#999;">
		Description
	</div>
	<div class="col-md-8">
		<ul class="list-group">
			{% verbatim %}
			<li ng-repeat="desc in item_list" class="list-group-item">

                    <button type="button" class="btn btn-link" ng-click="setEditedItem(desc);startEditingItem();" ><span class="glyphicon glyphicon-pencil"></span>
                    </button>
				    {{ desc.description }} : {{ desc.description_type }} <span class="small"><em>[{{ desc.locale }}]</em></span>
     				<span ng-if="desc.locale_preferred" class="glyphicon glyphicon-flag"></span>				    
				<span class="glyphicon glyphicon-trash pull-right" ng-click="deleteItem(desc)"></span>
			{% endverbatim %}
				{% if desc.localePreferred %}&nbsp;<span id="locale-preferred-desc-tooltip{{ forloop.counter }}" data-toggle="tooltip" data-placement="right" title="Locale preferred concept"><span class="glyphicon glyphicon-flag"></span></span>{% endif %}
				/ <span class="small">{{ desc.description_type|default:"" }}</span>
				{% if request.GET.debug %}<br /><pre>{{ desc|pprint }}</pre>{% endif %}</li>

		</ul>
	</div> {# 9 #}
</div> {# outer row#}


<div class="row">
<div class="col-md-3">
	&nbsp;
</div>
<div class="col-md-6">

<!-- CREATING -->
<div ng-if="shouldShowCreatingItem()">

	<button type="button" class="btn btn-link" ng-click="startCreatingItem()">
        <span class="glyphicon glyphicon-plus"></span>
        {% trans 'Add Description' %}
    </button>


    <div>
      {% verbatim %}{{ message }}{% endverbatim %}
    </div>

    <form ng-submit="addItem(newItem)" ng-show="isCreatingItem">
    <div class="form-group required">
    	<label class="control-label" for="id_description">Description</label>
    	<input class="form-control" id="id_desription" maxlength="30" name="description" 
    	    placeholder="Name" required="required" title="" type="text"
    	    ng-model="newItem.description" />
	</div>
	<div class="form-group">
		<label class="control-label" for="id_description_type">Description Type</label>
		<input class="form-control" id="id_desription_type" maxlength="30" name="description_type" 
		    placeholder="Description type" required="required" title="" type="text"
		    ng-model="newItem.description_type" />
	</div>

	<div class="form-group required">
		<label class="control-label" for="id_locale">Locale</label>
		<input class="form-control" id="id_locale" maxlength="30" name="locale" 
		    placeholder="Locale" required="required" title="" type="text"
		    ng-model="newItem.locale" />
	</div>

	<div class="form-group required">
		  <div class="checkbox">
        <label>
          <input type="checkbox" name="preferred_locale" ng-model="newItem.locale_preferred">{% trans 'Locale Preferred' %}
        </label>
      </div>
	</div>

	<div class="form-group">
	  <button type="submit" class="btn btn-primary">
	    {% trans 'Add Description' %}
	  </button>
      <button type="button" class="btn btn-default pull-right" ng-click="cancelCreatingItem()">{% trans 'Cancel' %}</button>
	 </div>
	</form>
</div> {# if creating show #}


<!-- EDITING -->
<div ng-if="shouldShowEditingItem()">

     {% verbatim %}<h4>Editing Description</h4> {% endverbatim %}
    <form ng-submit="updateItem(editedItem)" ng-show="isEditingItem">
    <div class="form-group required">
    	<label class="control-label" for="id_description">Description</label>
    	<input class="form-control" id="id_description" maxlength="30" name="description" 
    	    placeholder="Description" required="required" title="" type="text"
    	    ng-model="editedItem.description" />
	</div>
	<div class="form-group">
		<label class="control-label" for="id_description_type">Description Type</label>
		<input class="form-control" id="id_description_type" maxlength="30" name="description_type" 
		    placeholder="Description type" required="required" title="" type="text"
		    ng-model="editedItem.description_type" />
	</div>

	<div class="form-group required">
		<label class="control-label" for="id_locale">Locale</label>
		<input class="form-control" id="id_locale" maxlength="30" name="locale" 
		    placeholder="Locale" required="required" title="" type="text"
		    ng-model="editedItem.locale" />
	</div>

	<div class="form-group required">
		  <div class="checkbox">
        <label>
          <input type="checkbox" name="preferred_locale" ng-model="editedItem.locale_preferred">{% trans 'Locale Preferred' %}
        </label>
      </div>
	</div>

	<div class="form-group">
	  <button type="submit" class="btn btn-primary">
	    {% trans 'Update Description' %}
	  </button>
      <button type="button" class="btn btn-default pull-right" ng-click="cancelEditingItem()">{% trans 'Cancel' %}</button>
	 </div>
	</form>
</div> {# editing #}


</div> {# col6 for form for description #}



</div> {# row #}

</div> {# description controller #}
</div> {# app #}


{% endblock content-no-container %}

{% block extrajavascript %}
<script>
$('#element-info').tooltip();
$('#preferred-name-info').tooltip();
$('#locale-preferred-name-tooltip1').tooltip();
</script>
{% endblock extrajavascript %}
